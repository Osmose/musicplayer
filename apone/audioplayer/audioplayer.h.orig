#pragma once

#include <memory>
#include <stdexcept>
#include <string>
#include <functional>

class audio_exception : public std::exception {
public:
    audio_exception(const std::string &msg) : msg(msg) {}
    virtual const char *what() const throw() { return msg.c_str(); }

    std::string msg;
};

class InternalPlayer;

class AudioPlayer {
public:
    AudioPlayer(int hz = 44100);
    AudioPlayer(std::function<void(int16_t *, int)> cb, int hz = 44100);
    virtual ~AudioPlayer() {}

    virtual void play(std::function<void(int16_t *, int)> cb);
    virtual void close();

    virtual void pause();
    virtual void resume();

    virtual void set_volume(int percent);

    virtual void touch() const {}

    virtual int get_delay();

private:
        std::shared_ptr<InternalPlayer> internalPlayer;
};

